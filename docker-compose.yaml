services:
  scrapbot:
    build: .
    container_name: scrapbot-ai
    network_mode: host
    privileged: true 
    
    env_file:
      - .env

    devices:
      - "/dev/snd:/dev/snd"
    volumes:
      - /run/user/1000/pulse:/run/user/1000/pulse
      - /var/lib/dbus:/var/lib/dbus
      # Keep these as volumes for live-reloading during development
      - .:/app
    environment:
      - PULSE_SERVER=unix:/run/user/1000/pulse/native
      - PYTHONUNBUFFERED=1 
    group_add:
      - audio
    restart: unless-stopped